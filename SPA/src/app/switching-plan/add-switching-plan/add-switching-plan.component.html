<div class="row">
    <div class="inline-block navigation">
        <mat-card>
            <mat-card class="mat-card-item" (click)="basicInformationPageClick()">
                Basic Information
            </mat-card>
            <legend></legend>
            <mat-card class="mat-card-item" (click)="historyPageClick()">
                History of State Changes
            </mat-card>
            <legend></legend>
            <mat-card class="mat-card-item" (click)="multimediaPageClick()">
                Multimedia Attchments
            </mat-card>
            <legend></legend>
            <mat-card class="mat-card-item" (click)="equipmentPageClick()">
                Equipment
            </mat-card>
            <legend></legend>
            <mat-card class="mat-card-item" (click)="switchingPageClick()">
                Checklist
            </mat-card>
            <legend></legend>
        </mat-card>
    </div>

    <br>

    <legend></legend>
    <br>

    <div class="components">
        <span *ngIf="basicInformationPage">
            <mat-card>
                <form [formGroup]="switchingPlanForm" (ngSubmit)="submitSwitchPlan()">
                    <div class="row">
                        <mat-form-field class="example-full-width">
                            <mat-label>Type</mat-label>
                            <mat-select formControlName="type">
                                <mat-option *ngFor="let _type of types" [value]="_type.value" required>
                                    {{_type.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Status</mat-label>
                            <input matInput formControlName="status" value="Draft" disabled>
                        </mat-form-field>

                        <div class="col">
                            <mat-form-field>
                                <mat-label>Select Switching Plan</mat-label>
                                <mat-select formControlName="switchingPlan"
                                    (selectionChange)="onSwitchingPlanChange($event)">
                                    <mat-option *ngFor="let _switch of switchingPlansValues" [value]="_switch">
                                        {{_switch}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col">
                            <mat-form-field class="example-full-width">
                                <mat-label>Select Crew</mat-label>
                                <mat-select formControlName="fieldCrew">
                                    <mat-option *ngFor="let crew of crewValues" [value]="crew">
                                        {{crew}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <mat-form-field class="example-full-width">
                            <mat-label>Created By (Filled Automatically)</mat-label>
                            <input matInput formControlName="createdBy" disabled>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Details</mat-label>
                            <textarea matInput formControlName="details" required></textarea>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Notes</mat-label>
                            <textarea matInput formControlName="notes" required></textarea>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Telephone</mat-label>
                            <input matInput formControlName="telephone">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Date/Time Created (Filled Automatically)</mat-label>
                            <input matInput [matDatepicker]="__picker" placeholder="Created"
                                formControlName="createdDateTime" disabled>
                            <mat-datepicker-toggle matSuffix [for]="__picker"></mat-datepicker-toggle>
                            <mat-datepicker #__picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </form>
            </mat-card>
        </span>
        <span *ngIf="historyPage">
            <mat-card>
                <mat-label>Document is being created! No previous history changes could be found.</mat-label>
            </mat-card>
        </span>
        <span *ngIf="multimediaPage">
            <mat-card>
                <div class="row">
                    <div class="col-8">
                        <label class="btn btn-default p-0">
                            <input type="file" multiple (change)="selectFiles($event)" />
                        </label>
                    </div>
                    <div class="col-4">
                        <button mat-raised-button color="primary" [disabled]="!selectedFiles" (click)="uploadFiles()">
                            Upload
                        </button>
                    </div>
                </div>

                <div *ngFor="let progressInfo of progressInfos" class="mb-2">
                    <span>{{ progressInfo.fileName }}</span>
                    <div class="progress">
                        <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                            attr.aria-valuenow="{{ progressInfo.value }}" aria-valuemin="0" aria-valuemax="100"
                            [ngStyle]="{ width: progressInfo.value + '%' }">
                            {{ progressInfo.value }}%
                        </div>
                    </div>
                </div>

                <div *ngIf="message.length" class="alert alert-secondary my-3" role="alert">
                    <ul *ngFor="let msg of message; let i = index">
                        <li>{{ msg }}</li>
                    </ul>
                </div>

                <div class="card mt-3">
                    <div class="card-header">Selected Files</div>
                    <ul class="list-group list-group-flush" *ngFor="let file of selectedFiles">
                        <li class="list-group-item">
                            <a href="{{ file.url }}">{{ file.name }}</a>
                        </li>
                    </ul>
                </div>

                <!-- <div class="card mt-3">
                    <div class="card-header">Uploaded Files</div>
                    <ul class="list-group list-group-flush" *ngFor="let file of fileInfos | async">
                        <li class="list-group-item">
                            <a href="{{ file.url }}">{{ file.name }}</a>
                        </li>
                    </ul>
                </div> -->
            </mat-card>
        </span>
        <span *ngIf="equipmentPage">
            <mat-card>

            </mat-card>
        </span>
        <span *ngIf="switchingPage">
            <mat-card>
                <div class=".example-form">
                    <form (submit)="addTodo()">
                        <input matInput type="text" name="instructionInput" placeholder="Enter a Instruction"
                            [(ngModel)]="instructionInput" class="example-full-width" />
                        <!-- <input type="submit" value="Add Todo" class="todo-submit" /> -->
                        <legend></legend>
                        <button class="example-full-width submit-btn" mat-raised-button click="addTodo()"
                            color="primary">Add
                        </button>
                    </form>
                    <br>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">To do</th>
                                <th scope="col">Completed</th>
                                <th scope="col">&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody *ngFor="let instruction of switchingInstructions; let i = index;">
                            <tr>
                                <td>{{ i+1 }}</td>
                                <td>{{ instruction.message }}</td>
                                <td>
                                    <mat-checkbox [value]="instruction.isExecuted" (click)=toggleDone(i)></mat-checkbox>
                                </td>
                                <td>
                                    <button mat-icon-button class="delete" (click)="deleteTodo(i)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                        <!-- <div class="id">#{{ i+1 }}</div>
                        <div class="content">Message: {{ todo.content }}</div>
                        <div class="completed" (click)="toggleDone(i)">Executed: {{ todo.completed }}</div>
                        <button mat-icon-button class="delete" (click)="deleteTodo(i)">
                            <mat-icon>delete</mat-icon>
                        </button> -->
                    </table>
                </div>
            </mat-card>
        </span>
    </div>

    <button mat-raised-button color="primary" (click)="submitSwitchPlan()">Save</button>
    <legend></legend>
    <button mat-raised-button color="primary" [routerLink]='["/safety-documents-all"]'>Cancel</button>
</div>